---
title: Events
description: Real-time notifications for sync lifecycle events
edit-this-page-url: https://github.com/airweave-ai/airweave/blob/main/fern/docs/pages/events.mdx
slug: events
---

<Warning>
**Beta Feature**

The Events API is currently in beta. The API is stable but may receive enhancements based on feedback.
</Warning>

Airweave emits events when things happen in your organization—like when a sync job starts, completes, or fails. You can subscribe to these events via webhooks and get notified in real-time instead of polling.

## Concepts

| Term | Description |
|------|-------------|
| **Event** | A notification that something happened (e.g., `sync.completed`) |
| **Webhook** | An HTTP endpoint you register to receive events |
| **Subscription** | A webhook registration with the event types you want to receive |

## Quick Start

<Steps>
  <Step title="Create a webhook">
    Register your endpoint to receive events:

    <CodeBlocks>
    ```bash title="cURL"
    curl -X POST 'https://api.airweave.ai/events/subscriptions' \
      -H 'x-api-key: YOUR_API_KEY' \
      -H 'Content-Type: application/json' \
      -d '{
        "url": "https://your-server.com/webhook",
        "event_types": ["sync.completed", "sync.failed"]
      }'
    ```

    ```python title="Python"
    import requests

    response = requests.post(
        "https://api.airweave.ai/events/subscriptions",
        headers={"x-api-key": "YOUR_API_KEY"},
        json={
            "url": "https://your-server.com/webhook",
            "event_types": ["sync.completed", "sync.failed"]
        }
    )
    webhook = response.json()
    print(f"Webhook ID: {webhook['id']}")
    ```

    ```javascript title="Node.js"
    const response = await fetch("https://api.airweave.ai/events/subscriptions", {
      method: "POST",
      headers: {
        "x-api-key": "YOUR_API_KEY",
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        url: "https://your-server.com/webhook",
        event_types: ["sync.completed", "sync.failed"]
      })
    });
    const webhook = await response.json();
    console.log(`Webhook ID: ${webhook.id}`);
    ```
    </CodeBlocks>
  </Step>

  <Step title="Handle incoming events">
    Your endpoint receives POST requests with event payloads:

    <CodeBlocks>
    ```python title="Python (FastAPI)"
    from fastapi import FastAPI, Request

    app = FastAPI()

    @app.post("/webhook")
    async def handle_event(request: Request):
        event = await request.json()

        match event["eventType"]:
            case "sync.completed":
                print(f"Sync completed: {event['payload']['job_id']}")
            case "sync.failed":
                print(f"Sync failed: {event['payload']['error']}")

        return {"status": "ok"}
    ```

    ```javascript title="Node.js (Express)"
    const express = require("express");
    const app = express();

    app.use(express.json());

    app.post("/webhook", (req, res) => {
      const event = req.body;

      switch (event.eventType) {
        case "sync.completed":
          console.log(`Sync completed: ${event.payload.job_id}`);
          break;
        case "sync.failed":
          console.log(`Sync failed: ${event.payload.error}`);
          break;
      }

      res.json({ status: "ok" });
    });
    ```
    </CodeBlocks>
  </Step>
</Steps>

## Event Types

All events are related to sync job lifecycle:

| Event | Description |
|-------|-------------|
| `sync.pending` | Sync job queued |
| `sync.running` | Sync job started |
| `sync.completed` | Sync job finished successfully |
| `sync.failed` | Sync job failed |
| `sync.cancelled` | Sync job cancelled |

### Payload Structure

```json
{
  "id": "msg_2xKvB8LPqM4nRst",
  "eventType": "sync.completed",
  "timestamp": "2025-01-13T14:30:00Z",
  "payload": {
    "event_type": "sync.completed",
    "job_id": "550e8400-e29b-41d4-a716-446655440000",
    "collection_readable_id": "finance-data-ab123",
    "collection_name": "Finance Data",
    "source_connection_id": "660e8400-e29b-41d4-a716-446655440001",
    "source_type": "slack",
    "status": "completed",
    "timestamp": "2025-01-13T14:30:00Z"
  }
}
```

For failed events, the payload includes an additional `error` field:

```json
{
  "id": "msg_3yLwC9MPrN5oStu",
  "eventType": "sync.failed",
  "timestamp": "2025-01-13T14:35:00Z",
  "payload": {
    "event_type": "sync.failed",
    "job_id": "550e8400-e29b-41d4-a716-446655440000",
    "collection_readable_id": "finance-data-ab123",
    "collection_name": "Finance Data",
    "source_connection_id": "660e8400-e29b-41d4-a716-446655440001",
    "source_type": "notion",
    "status": "failed",
    "timestamp": "2025-01-13T14:35:00Z",
    "error": "Authentication token expired"
  }
}
```

## Managing Webhooks

### List webhooks

```bash
curl -X GET 'https://api.airweave.ai/events/subscriptions' \
  -H 'x-api-key: YOUR_API_KEY'
```

### Update a webhook

```bash
curl -X PATCH 'https://api.airweave.ai/events/subscriptions/{id}' \
  -H 'x-api-key: YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "event_types": ["sync.completed", "sync.failed", "sync.running"]
  }'
```

### Delete a webhook

```bash
curl -X DELETE 'https://api.airweave.ai/events/subscriptions/{id}' \
  -H 'x-api-key: YOUR_API_KEY'
```

## Signature Verification

Every event delivery is signed. Verify signatures to ensure requests come from Airweave.

### Get your signing secret

```bash
curl -X GET 'https://api.airweave.ai/events/subscriptions/{id}/secret' \
  -H 'x-api-key: YOUR_API_KEY'
```

Returns a secret in the format `whsec_...`.

### Verify the signature

Events are delivered via [Svix](https://www.svix.com/). The signature is in request headers:

- `svix-id` – Message ID
- `svix-timestamp` – Unix timestamp
- `svix-signature` – HMAC-SHA256 signature

<CodeBlocks>
```python title="Python"
import hmac
import hashlib
import base64

def verify_signature(payload: bytes, headers: dict, secret: str) -> bool:
    msg_id = headers.get("svix-id")
    timestamp = headers.get("svix-timestamp")
    signature = headers.get("svix-signature")

    if not all([msg_id, timestamp, signature]):
        return False

    secret_bytes = base64.b64decode(secret.replace("whsec_", ""))
    signed_content = f"{msg_id}.{timestamp}.{payload.decode()}"

    expected = hmac.new(secret_bytes, signed_content.encode(), hashlib.sha256).digest()
    expected_b64 = base64.b64encode(expected).decode()

    for sig in signature.split(","):
        if hmac.compare_digest(expected_b64, sig.split(" ")[-1]):
            return True
    return False
```

```javascript title="Node.js"
const crypto = require("crypto");

function verifySignature(payload, headers, secret) {
  const msgId = headers["svix-id"];
  const timestamp = headers["svix-timestamp"];
  const signature = headers["svix-signature"];

  if (!msgId || !timestamp || !signature) return false;

  const secretBytes = Buffer.from(secret.replace("whsec_", ""), "base64");
  const signedContent = `${msgId}.${timestamp}.${payload}`;

  const expected = crypto
    .createHmac("sha256", secretBytes)
    .update(signedContent)
    .digest("base64");

  return signature.split(",").some(sig =>
    crypto.timingSafeEqual(Buffer.from(expected), Buffer.from(sig.split(" ").pop()))
  );
}
```
</CodeBlocks>

<Tip>
Use the official [Svix libraries](https://docs.svix.com/receiving/verifying-payloads/how) for production—they handle edge cases automatically.
</Tip>

## Event History

Retrieve recent events sent to your organization:

```bash
# All events
curl -X GET 'https://api.airweave.ai/events/messages' \
  -H 'x-api-key: YOUR_API_KEY'

# Filter by type
curl -X GET 'https://api.airweave.ai/events/messages?event_types=sync.completed&event_types=sync.failed' \
  -H 'x-api-key: YOUR_API_KEY'
```

## Delivery & Retries

Failed deliveries are retried with exponential backoff:

| Attempt | Delay |
|---------|-------|
| 1 | Immediate |
| 2 | 5 seconds |
| 3 | 5 minutes |
| 4 | 30 minutes |
| 5 | 2 hours |

A delivery fails if your endpoint returns non-2xx, times out (30s), or is unreachable.

## Best Practices

- **Respond fast** – Return `200 OK` immediately, process async
- **Deduplicate** – Events may be delivered more than once; use the `id` field
- **Use HTTPS** – Required in production
- **Verify signatures** – Always verify in production
- **Log payloads** – Helps debug event processing issues
